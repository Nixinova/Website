<html lang="en-NZ">
<head>
    <title>Hytale Blog API &ndash; Nixinova</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/tools.css">
    <meta name="description" content="">
    <meta name="keywords" content="nixinova">
    <meta name="author" content="Nixinova">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/assets/js/tool-functions.js"></script>
</head>
<body>
    <script>
        var req = new XMLHttpRequest();
        req.open("GET","blogs.json",false);
        req.send();
        var response = req.responseText;
        var blogs = JSON.parse(response);
        var blog_titles = [];
        var blog_urls = [];
        var blog_dates = [];

        $( content => {
            for (i in blogs) {
                blog_titles.push(blogs[i].title);
                blog_urls.push(blogs[i].slug);
                blog_dates.push(blogs[i].publishedAt);
                $('#titles').append(`<option value="${blog_urls[i]}">${blog_titles[i]}</option>`);
            }
        });

        function getDate() {
            let selected_blog = $('#titles').val();
            let index = blog_urls.indexOf(selected_blog);
            let date = new Date(blog_dates[index]);
    ///*
            let months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            let weekdays = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];

            let year = date.getUTCFullYear();
            let month = months[date.getUTCMonth()];
            let day = '00' + date.getUTCDate().toString();
            let weekday = weekdays[date.getUTCDay()];
            let hour = '00' + date.getUTCHours().toString();
            let min = '00' + date.getUTCMinutes().toString();
            let sec = '00' + date.getUTCSeconds().toString();

            $('output').html(`${weekday}, ${day.slice(-2)} ${month} ${year}, ${hour.slice(-2)}:${min.slice(-2)}:${sec.slice(-2)} (UTC)`);
          //$('output').html(date.toString().replace(/ \(.+/,'').replace(/GMT([+-][0-9][0-9]:[0-9[0-9])/,'(UTC$1)'));
         }
    </script>
    <header>
        <nav></nav>
        <script id="load-nav">$("nav").load("/assets/imports/navigation"); $('#load-nav').remove();</script>
    </header>

    <main>
        <form action="javascript:submit()" id="input_form">
            <div>
                <p>
                    <label>Blog post:</label>
                    <select id="titles"></select>
                    <button onclick="try{getDate()}catch(e){$('body').append(e.stack)}">Get date</button><br>

                    <output style="padding:1em;"></output>
                </p>
            </div>
        </form>
    </main>

    <footer class="bottom">
        <span id="copyright"></span>
        â€¢&nbsp;<a href="blogs.json" target="_blank">View JSON</a>
    </footer>
    <script id="load-copyright">$("#copyright").load("/assets/imports/footer"); $("#load-copyright").remove();</script>
</body>
</html>
