<!DOCTYPE html>
<html lang="en-NZ">
<head>
    <title>View Subpages</title>
    <meta charset="UTF-8">
    <meta name="description" content="View subpages">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>

    <script data-name="Page script">

        var query = location.href.split('?')[1];
        if (!query) query = "blank";
        var data = {
            "downloads": {
                subfolders: ["minecraft"],
                pages: []
            },
            "downloads/minecraft": {
                subfolders: ["maps", "resource-packs"],
                pages: []
            },
            "downloads/minecraft/maps": {
                subfolders: [],
                pages: ["kitpvp", "musical-blocks", "skywars"]
            },
            "downloads/minecraft/resource-packs": {
                subfolders: [],
                pages: ["mash-up", "herobrinenzk", "themed"]
            },
            "tools": {
                subfolders: ["minecraft","hytale"],
                pages: []
            },
            "tools/minecraft": {
                subfolders: ["api", "converters","generators"],
                pages: []
            },
            "tools/minecraft/api": {
                subfolders: [],
                pages: ["player"]
            },
            "tools/minecraft/converters": {
                subfolders: [],
                pages: ["coordinates"]
            },
            "tools/minecraft/generators": {
                subfolders: [],
                pages: ["give", "summon"]
            },
            "tools/hytale": {
                subfolders: ["api"],
                pages: []
            },
            "tools/hytale/api": {
                subfolders: [],
                pages: ["blog"]
            },
            "blank": {
                subfolders: ["downloads", "tools"],
                pages: ["404", "index", "search", "view"]
            }
        }
        
        $(function() {

            $('#subfolders-text').empty();
            $('#pages-text').empty();

            if (data[query].subfolders.length > 0) {
                $('#subfolders-title').removeClass('hide');
                for (let folder of data[query].subfolders) {
                    $('#subfolders-text').append(`\n<li><strong><a href="/${query}/${folder}/">/${folder}</a></strong></li>`)
                }
            }

            if (data[query].pages.length > 0) {
                $('#pages-title').removeClass('hide');
                for (let page of data[query].pages) {
                    $('#pages-text').append(`\n<li><a href="/${query}/${page}">${page}</a></li>`)
                }
            }

        });
        

   </script>
    
    <header>
        <nav></nav>
        <script id="load-nav">$('nav').load('/imports/navigation'); $('#load-nav').remove();</script>
    </header>

    <main style="display: flex;">
        <div id="content" style="margin: auto;">

            <h1>Subpage index</h1>

            <h2 id="subfolders-title" class="hide">Subfolders</h2>
            <ul id="subfolders-text"></ul>

            <h2 id="pages-title" class="hide">Pages</h2>
            <ul id="pages-text"></ul>

        </div>
    </main>

    <footer style="margin-top: 0;"></footer>
    <script id="load-footer">$("footer").load("/imports/footer"); $('#load-footer').remove();</script>

</body>
</html>