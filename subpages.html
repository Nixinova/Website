<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <script id="page-loader-script">
        var PAGE_DATA = {
            title: "Subpage Index",
            description: "View subpages",
            stylesheets: ["main.css"],
            scripts: []
        }
        $(document).ready(function() {loadData(PAGE_DATA);});
    </script>
    <style>main {display: flex;}</style>
    <script data-name="Page script">

        var query = location.href.split('?')[1];
        if (!query) query = "default";
        var data = {
            "assets": {subfolders: ["css", "fonts", "images", "imports", "js"]},
            "assets/css": {subpages: ["main.css", "resource-packs.css","tools.css"]},
            "assets/fonts": {subpages: ["minecraft.ttf", "valken.ttf"]},
            "assets/images": {subfolders: ["minecraft"], subpages: ["n.png", "nixinova.png"]},
            "assets/images/minecraft": {subfolders: ["maps", "resource-packs"]},
            "assets/images/minecraft/maps": {subpages: ["kitpvp.png"]},
            "assets/images/minecraft/resource-packs": {subpages: ["easter-mash-up.jpg", "endercreeper.jpg", "nixinova-mash-up.jpg"]},
            "assets/imports": {subpages: ["footer.html", "navigation.html"]},
            "assets/js": {subpages: ["loader.js", "tool-functions.js"]},
            "downloads": {subfolders: ["minecraft"]},
            "downloads/minecraft": {subfolders: ["maps", "resource-packs"]},
            "downloads/minecraft/maps": {subpages: ["kitpvp", "musical-blocks", "skywars"]},
            "downloads/minecraft/resource-packs": {subpages: ["mash-up", "herobrinenzk", "themed"]},
            "tools": {subfolders: ["minecraft","hytale"]},
            "tools/minecraft": {subfolders: ["api", "converters","commands"]},
            "tools/minecraft/api": {subpages: ["player", "versions"]},
            "tools/minecraft/converters": {subpages: ["coordinates"]},
            "tools/minecraft/commands": {subpages: ["give", "summon"]},
            "tools/hytale": {subfolders: ["api"]},
            "tools/hytale/api": {subpages: ["blog"]},
            "default": {subfolders: ["assets", "downloads", "tools"], subpages: ["404", "index", "search", "subpages"]}
        }
        if (data[query] === undefined) query = 'default';
        
        $(function() {

            if (!data[query].subfolders) data[query].subfolders = [];
            if (!data[query].subpages) data[query].subp = [];

            $('#subfolders-text').empty();
            $('#subpages-text').empty();

            if (location.href.split('/')[3] !== 'subpages?') {
                if (location.href.split('/')[3] && location.href.split('/')[4] === undefined) {
                    $('#go-up').append(`\n<a href="/subpages?">← Go back</a>`);
                } else {
                    $('#go-up').append(`\n<a href="${location.href.replace(/(.+)\/(.+)$/, '$1')}">← Go back</a>`);
                }
            } 

            if (data[query].subfolders.length > 0) {
                let folder = query === 'default' ? '' : query;
                $('#subfolders-title').removeClass('hide');
                for (let subfolder of data[query].subfolders) {
                    $('#subfolders-text').append(`
                        \n<li><strong><a href="?${folder ? folder+'/' : ''}${subfolder}">${subfolder}/</a></strong></li>
                    `);
                }
            }

            if (data[query].subpages.length > 0) {
                let folder = query === 'default' ? '' : '/'+query;
                $('#subpages-title').removeClass('hide');
                for (let subpage of data[query].subpages) {
                    $('#subpages-text').append(`\n<li><a href="${folder}/${subpage}">${subpage}</a></li>`)
                }
            }

        });
        

   </script>

    <main>
        <div id="content" style="margin: auto;">
            <h1 style="border-bottom: solid;">Subpage index</h1>
            <span id="go-up"></span>
            <br/>

            <h2 id="subfolders-title" class="hide">Subfolders</h2>
            <ul id="subfolders-text"></ul>

            <h2 id="subpages-title" class="hide">Subpages</h2>
            <ul id="subpages-text"></ul>
        </div>
    </main>
</body>
</html>